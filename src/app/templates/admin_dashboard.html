{% extends "base.html" %}
{% block content %}
  <section class="panel">
    <div class="actions" style="justify-content: space-between; align-items: center;">
      <h1 style="margin-bottom: 0;">Платежи</h1>
      <a class="btn btn-primary" href="/admin/payments/new">Создать платеж</a>
    </div>
    <div class="grid grid-4" style="margin-top: 0.9rem;">
      <article class="metric">
        <div class="label">Всего</div>
        <div class="value">{{ stats_total }}</div>
      </article>
      <article class="metric">
        <div class="label">Ожидают</div>
        <div class="value">{{ stats_pending }}</div>
      </article>
      <article class="metric">
        <div class="label">Подтверждения</div>
        <div class="value">{{ stats_confirming }}</div>
      </article>
      <article class="metric">
        <div class="label">Оплачены</div>
        <div class="value">{{ stats_paid }}</div>
      </article>
    </div>
  </section>

  <section class="panel">
    <table>
      <thead>
      <tr>
        <th>ID</th>
        <th>Название</th>
        <th>Сеть</th>
        <th>Сумма</th>
        <th>Статус</th>
        <th>Создан</th>
      </tr>
      </thead>
      <tbody>
      {% for payment in payments %}
        <tr>
          <td><a class="mono" href="/admin/payments/{{ payment.id }}">{{ payment.id[:8] }}</a></td>
          <td>{{ payment.title }}</td>
          <td>{{ payment.network }}</td>
          <td class="mono">{{ payment.pay_amount|amt }}</td>
          <td><span class="status-pill status-{{ payment.status }}">{{ payment.status }}</span></td>
          <td>{{ payment.created_at|dt }}</td>
        </tr>
      {% else %}
        <tr>
          <td colspan="6">Пока платежей нет.</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </section>
{% endblock %}
